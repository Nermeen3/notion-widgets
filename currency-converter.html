<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Currency Converter</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@500;600&display=swap" rel="stylesheet">
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'DM Sans', sans-serif;
    background: #1a1a1a;
    color: #e8e4df;
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    padding: 16px;
  }

  .converter {
    width: 100%;
    max-width: 400px;
    background: #222;
    border-radius: 16px;
    padding: 24px;
    border: 1px solid #333;
    box-shadow: 0 8px 32px rgba(0,0,0,0.4);
  }

  .header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 20px;
  }

  .header h1 {
    font-size: 15px;
    font-weight: 600;
    letter-spacing: 0.5px;
    color: #aaa;
    text-transform: uppercase;
  }

  .rate-badge {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    background: #2a3a2a;
    color: #6fcf6f;
    padding: 4px 10px;
    border-radius: 20px;
    font-weight: 500;
  }

  .input-group {
    position: relative;
    margin-bottom: 12px;
  }

  .input-group label {
    display: block;
    font-size: 11px;
    color: #666;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 6px;
    font-weight: 600;
  }

  .input-row {
    display: flex;
    gap: 8px;
    align-items: stretch;
  }

  .amount-input {
    flex: 1;
    font-family: 'JetBrains Mono', monospace;
    font-size: 22px;
    font-weight: 600;
    background: #1a1a1a;
    border: 1px solid #333;
    border-radius: 10px;
    color: #fff;
    padding: 12px 14px;
    outline: none;
    transition: border-color 0.2s;
  }

  .amount-input:focus {
    border-color: #555;
  }

  .amount-input.result {
    color: #6fcf6f;
    background: #1a201a;
    border-color: #2a3a2a;
  }

  select.currency-select {
    width: 90px;
    font-family: 'DM Sans', sans-serif;
    font-size: 14px;
    font-weight: 700;
    background: #2a2a2a;
    border: 1px solid #333;
    border-radius: 10px;
    color: #fff;
    padding: 0 12px;
    cursor: pointer;
    outline: none;
    appearance: none;
    -webkit-appearance: none;
    text-align: center;
    transition: border-color 0.2s;
  }

  select.currency-select:hover {
    border-color: #555;
  }

  .swap-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 4px auto;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    border: 1px solid #333;
    background: #2a2a2a;
    color: #888;
    cursor: pointer;
    transition: all 0.25s;
    font-size: 16px;
  }

  .swap-btn:hover {
    background: #333;
    color: #fff;
    transform: rotate(180deg);
  }

  .last-updated {
    text-align: center;
    font-size: 10px;
    color: #444;
    margin-top: 16px;
    font-family: 'JetBrains Mono', monospace;
  }

  .refresh-btn {
    display: block;
    margin: 10px auto 0;
    font-family: 'DM Sans', sans-serif;
    font-size: 11px;
    background: #2a2a2a;
    border: 1px solid #333;
    border-radius: 8px;
    color: #888;
    padding: 6px 14px;
    cursor: pointer;
    transition: all 0.2s;
  }

  .refresh-btn:hover {
    background: #333;
    color: #fff;
  }
</style>
</head>
<body>

<div class="converter">
  <div class="header">
    <h1>ðŸ’± Convert</h1>
    <span class="rate-badge" id="rateBadge">...</span>
  </div>

  <div class="input-group">
    <label>From</label>
    <div class="input-row">
      <input type="number" class="amount-input" id="fromAmount" value="1000" placeholder="0">
      <select class="currency-select" id="fromCurrency">
        <option value="GEL">ðŸ‡¬ðŸ‡ª GEL</option>
        <option value="USD">ðŸ‡ºðŸ‡¸ USD</option>
        <option value="JOD">ðŸ‡¯ðŸ‡´ JOD</option>
        <option value="EUR">ðŸ‡ªðŸ‡º EUR</option>
      </select>
    </div>
  </div>

  <button class="swap-btn" id="swapBtn" title="Swap currencies">â‡…</button>

  <div class="input-group">
    <label>To</label>
    <div class="input-row">
      <input type="text" class="amount-input result" id="toAmount" readonly placeholder="...">
      <select class="currency-select" id="toCurrency">
        <option value="USD">ðŸ‡ºðŸ‡¸ USD</option>
        <option value="GEL">ðŸ‡¬ðŸ‡ª GEL</option>
        <option value="JOD">ðŸ‡¯ðŸ‡´ JOD</option>
        <option value="EUR">ðŸ‡ªðŸ‡º EUR</option>
      </select>
    </div>
  </div>

  <div class="last-updated" id="lastUpdated">approximate rates</div>
  <button class="refresh-btn" id="refreshBtn">â†» Refresh live rates</button>
</div>

<script>
  var fromAmount = document.getElementById('fromAmount');
  var toAmount = document.getElementById('toAmount');
  var fromCurrency = document.getElementById('fromCurrency');
  var toCurrency = document.getElementById('toCurrency');
  var rateBadge = document.getElementById('rateBadge');
  var lastUpdated = document.getElementById('lastUpdated');
  var swapBtn = document.getElementById('swapBtn');
  var refreshBtn = document.getElementById('refreshBtn');

  // Built-in rates (USD base) - works immediately, no API needed
  var rates = {
    USD: 1,
    EUR: 0.92,
    GEL: 2.74,
    JOD: 0.709
  };

  function convert() {
    var from = fromCurrency.value;
    var to = toCurrency.value;
    var amount = parseFloat(fromAmount.value);

    if (!amount || !rates[from] || !rates[to]) {
      toAmount.value = '';
      rateBadge.textContent = 'â€”';
      return;
    }

    var inUsd = amount / rates[from];
    var result = inUsd * rates[to];
    var rate = rates[to] / rates[from];

    toAmount.value = result.toLocaleString('en-US', {
      minimumFractionDigits: 2,
      maximumFractionDigits: 2
    });

    rateBadge.textContent = '1 ' + from + ' = ' + rate.toFixed(4) + ' ' + to;
  }

  function fetchLiveRates() {
    refreshBtn.textContent = 'â†» Loading...';
    var xhr = new XMLHttpRequest();
    xhr.open('GET', 'https://open.er-api.com/v6/latest/USD', true);
    xhr.onload = function() {
      if (xhr.status === 200) {
        try {
          var data = JSON.parse(xhr.responseText);
          if (data.result === 'success') {
            rates.EUR = data.rates.EUR;
            rates.GEL = data.rates.GEL;
            rates.JOD = data.rates.JOD;
            rates.USD = 1;
            lastUpdated.textContent = 'live rates updated âœ“';
            convert();
          }
        } catch(e) {
          lastUpdated.textContent = 'using approximate rates';
        }
      }
      refreshBtn.textContent = 'â†» Refresh live rates';
    };
    xhr.onerror = function() {
      lastUpdated.textContent = 'using approximate rates';
      refreshBtn.textContent = 'â†» Refresh live rates';
    };
    xhr.send();
  }

  swapBtn.onclick = function() {
    var tmpCur = fromCurrency.value;
    fromCurrency.value = toCurrency.value;
    toCurrency.value = tmpCur;
    convert();
  };

  refreshBtn.onclick = fetchLiveRates;
  fromAmount.oninput = convert;
  fromCurrency.onchange = convert;
  toCurrency.onchange = convert;

  // Works immediately with built-in rates
  convert();

  // Try live rates in background
  try { fetchLiveRates(); } catch(e) {}
</script>
</body>
</html>
